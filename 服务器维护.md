# 服务器维护

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
在我们版本运行之初，可以这么理解，已经将完好的版本发布，先要对其进行升级，但是又不要用户感知自己服务器的升级行为，我们可参考 nginx 的平滑升级

### nginx 平滑升级

当前服务器中正在运行 nginx 服务，现对 nginx 进行升级(且跨度不要太大，容易造成服务器崩溃)且在服务不停止的情况下进行升级

**具体过程：**

- 在不停掉旧进程的情况下，启动新进程

- 旧进程负责处理仍然没有处理完的请求，但不在接受新请求

- 新进程负责接受请求

- 老进程处理完所有请求，关闭所有连接后，服务终止
